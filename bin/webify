#!/bin/bash

#
# Function to "Webify" a file name
# Author: Daniel Correa
# Version: 0.3

USAGE="Usage: $(basename $0) [files...]"

if [ "$#" -lt 1 ]; then

	echo "Filename required"
	echo $USAGE

	exit 1

fi

for i in "$@"; do

	filename=$(basename "$i")
	dirname=$(dirname "$i")

	if [[ -e "$i" ]]; then


       #echo $dirname

       new_filename="$( echo "$i" | sed -e 's/ /_/g' \
       -e 's/[ÁáãÃ]/a/g' \
       -e 's/[ÍíÎîïÏ]/e/g' \
       -e 's/[ÉéÊê]/e/g' \
       -e 's/[ÓóÕõ]/o/g' \
       -e 's/[ÚúÜü]/u/g' \
       -e 's/[Çç]/c/g' \
       -e 's/[Ññ]/n/g' \
       -e 's/\(.*\)/\L\1/g' )"

	   if [[ -e "$new_filename" ]]; then
		   echo "$new_filename already exists. Skipping."
	   else
		   mv -v "$dirname/$filename" "$dirname/$new_filename"
	   fi

   else

	   echo "$i: File not found"

   fi

done
